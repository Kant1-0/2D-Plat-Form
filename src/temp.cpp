//Set clipping for walking right animation
        /*gSpriteBowser[ 1 ].x =   0;
        gSpriteBowser[ 1 ].y =   0;
        gSpriteBowser[ 1 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 1 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 2 ].x =  76;
        gSpriteBowser[ 2 ].y =   0;
        gSpriteBowser[ 2 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 2 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 3 ].x = 152;
        gSpriteBowser[ 3 ].y =   0;
        gSpriteBowser[ 3 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 3 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 4 ].x = 228;
        gSpriteBowser[ 4 ].y =   0;
        gSpriteBowser[ 4 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 4 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 5 ].x = 304;
        gSpriteBowser[ 5 ].y =   0;
        gSpriteBowser[ 5 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 5 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 6 ].x = 380;
        gSpriteBowser[ 6 ].y =   0;
        gSpriteBowser[ 6 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 6 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 7 ].x = 456;
        gSpriteBowser[ 7 ].y =   0;
        gSpriteBowser[ 7 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 7 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 8 ].x = 532;
        gSpriteBowser[ 8 ].y =   0;
        gSpriteBowser[ 8 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 8 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 9 ].x = 608;
        gSpriteBowser[ 9 ].y =   0;
        gSpriteBowser[ 9 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 9 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 10 ].x = 684;
        gSpriteBowser[ 10 ].y =   0;
        gSpriteBowser[ 10 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 10 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 11 ].x = 760;
        gSpriteBowser[ 11 ].y =   0;
        gSpriteBowser[ 11 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 11 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 12 ].x = 836;
        gSpriteBowser[ 12 ].y =   0;
        gSpriteBowser[ 12 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 12 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 13 ].x = 912;
        gSpriteBowser[ 13 ].y =   0;
        gSpriteBowser[ 13 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 13 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 14 ].x = 988;
        gSpriteBowser[ 14 ].y =   0;
        gSpriteBowser[ 14 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 14 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 15 ].x = 1064;
        gSpriteBowser[ 15 ].y =    0;
        gSpriteBowser[ 15 ].w =   BOWSER_SIZE;
        gSpriteBowser[ 15 ].h =   BOWSER_SIZE;

        gSpriteBowser[ 16 ].x = 1140;
        gSpriteBowser[ 16 ].y =    0;
        gSpriteBowser[ 16 ].w =   BOWSER_SIZE;
        gSpriteBowser[ 16 ].h =   BOWSER_SIZE;

        //Set clipping for walking left animation
        gSpriteBowser[ 21 ].x =   0;
        gSpriteBowser[ 21 ].y =  76;
        gSpriteBowser[ 21 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 21 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 22 ].x =  76;
        gSpriteBowser[ 22 ].y =  76;
        gSpriteBowser[ 22 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 22 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 23 ].x = 152;
        gSpriteBowser[ 23 ].y =  76;
        gSpriteBowser[ 23 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 23 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 24 ].x = 228;
        gSpriteBowser[ 24 ].y =  76;
        gSpriteBowser[ 24 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 24 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 25 ].x = 304;
        gSpriteBowser[ 25 ].y =  76;
        gSpriteBowser[ 25 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 25 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 26 ].x = 380;
        gSpriteBowser[ 26 ].y =  76;
        gSpriteBowser[ 26 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 26 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 27 ].x = 456;
        gSpriteBowser[ 27 ].y =  76;
        gSpriteBowser[ 27 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 27 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 28 ].x = 532;
        gSpriteBowser[ 28 ].y =  76;
        gSpriteBowser[ 28 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 28 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 29 ].x = 608;
        gSpriteBowser[ 29 ].y =  76;
        gSpriteBowser[ 29 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 29 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 30 ].x = 684;
        gSpriteBowser[ 30 ].y =  76;
        gSpriteBowser[ 30 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 30 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 31 ].x = 760;
        gSpriteBowser[ 31 ].y =  76;
        gSpriteBowser[ 31 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 31 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 32 ].x = 836;
        gSpriteBowser[ 32 ].y =  76;
        gSpriteBowser[ 32 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 32 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 33 ].x = 912;
        gSpriteBowser[ 33 ].y =  76;
        gSpriteBowser[ 33 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 33 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 34 ].x = 988;
        gSpriteBowser[ 34 ].y =  76;
        gSpriteBowser[ 34 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 34 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 35 ].x = 1064;
        gSpriteBowser[ 35 ].y =   76;
        gSpriteBowser[ 35 ].w =   BOWSER_SIZE;
        gSpriteBowser[ 35 ].h =   BOWSER_SIZE;

        gSpriteBowser[ 36 ].x = 1140;
        gSpriteBowser[ 36 ].y =   76;
        gSpriteBowser[ 36 ].w =   BOWSER_SIZE;
        gSpriteBowser[ 36 ].h =   BOWSER_SIZE;

        //Set clipping for waiting right animation
        gSpriteBowser[ 81 ].x =   0;
        gSpriteBowser[ 81 ].y = 304;
        gSpriteBowser[ 81 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 81 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 82 ].x =  76;
        gSpriteBowser[ 82 ].y = 304;
        gSpriteBowser[ 82 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 82 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 83 ].x = 152;
        gSpriteBowser[ 83 ].y = 304;
        gSpriteBowser[ 83 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 83 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 84 ].x = 228;
        gSpriteBowser[ 84 ].y = 304;
        gSpriteBowser[ 84 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 84 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 85 ].x = 304;
        gSpriteBowser[ 85 ].y = 304;
        gSpriteBowser[ 85 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 85 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 86 ].x = 380;
        gSpriteBowser[ 86 ].y = 304;
        gSpriteBowser[ 86 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 86 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 87 ].x = 456;
        gSpriteBowser[ 87 ].y = 304;
        gSpriteBowser[ 87 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 87 ].h =  BOWSER_SIZE;

        //Set clipping for waiting left animation
        gSpriteBowser[ 101 ].x =   0;
        gSpriteBowser[ 101 ].y = 380;
        gSpriteBowser[ 101 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 101 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 102 ].x =  76;
        gSpriteBowser[ 102 ].y = 380;
        gSpriteBowser[ 102 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 102 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 103 ].x = 152;
        gSpriteBowser[ 103 ].y = 380;
        gSpriteBowser[ 103 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 103 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 104 ].x = 228;
        gSpriteBowser[ 104 ].y = 380;
        gSpriteBowser[ 104 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 104 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 105 ].x = 304;
        gSpriteBowser[ 105 ].y = 380;
        gSpriteBowser[ 105 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 105 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 106 ].x = 380;
        gSpriteBowser[ 106 ].y = 380;
        gSpriteBowser[ 106 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 106 ].h =  BOWSER_SIZE;

        gSpriteBowser[ 107 ].x = 456;
        gSpriteBowser[ 107 ].y = 380;
        gSpriteBowser[ 107 ].w =  BOWSER_SIZE;
        gSpriteBowser[ 107 ].h =  BOWSER_SIZE;*/



                //Set clip frame animation on current keystate
                /*const Uint8* currentKeyStates = SDL_GetKeyboardState( NULL );
                if( currentKeyStates[ SDL_SCANCODE_RIGHT ] )
                {
                    gDirection = BOWSER_RIGHT;
                    gLastID = BOWSER_RIGHT_WALK;
                    gFrame = BOWSER_RIGHT_WALK * FRAME_SPEED;
                    gAnimationEnd = BOWSER_RIGHT_WALK_END;
                }
                else if( currentKeyStates[ SDL_SCANCODE_LEFT ] )
                {
                    gDirection = BOWSER_LEFT;
                    gLastID = BOWSER_LEFT_WALK;
                    gFrame = BOWSER_LEFT_WALK * FRAME_SPEED;
                    gAnimationEnd = BOWSER_LEFT_WALK_END;
                }
                else
                {
                    if( gDirection == BOWSER_RIGHT )
                    {
                        gLastID = BOWSER_RIGHT_WAITING;
                        gFrame = BOWSER_RIGHT_WAITING * FRAME_SPEED;
                        gAnimationEnd = BOWSER_RIGHT_WAITING_END;
                    }
                    else if( gDirection == BOWSER_LEFT )
                    {
                        gLastID = BOWSER_LEFT_WAITING;
                        gFrame = BOWSER_LEFT_WAITING * FRAME_SPEED;
                        gAnimationEnd = BOWSER_LEFT_WAITING_END;
                    }
                }*/




/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   main.cpp                                           :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: qfremeau <qfremeau@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2016/04/11 14:08:28 by qfremeau          #+#    #+#             */
/*   Updated: 2016/04/11 14:12:02 by qfremeau         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "prototypes.h"

int main( int argc, char* args[] )
{
    fprintf( stdout, "Entering main()\n" );

        //Start up SDL and create window
        if( !init() )
        {
                printf( "Failed to initialize!\n" );
        }
        else
        {
                //Load media
                if( !loadMedia() )
                {
                        printf( "Failed to load media!\n" );
                }
                else
                {
                        //Main loop flag
                        bool quit = false;
                        //Event handler
                        SDL_Event e;

                        //Direction for player
                        gLastID = BOWSER_RIGHT_WAITING;
            gFrame = BOWSER_RIGHT_WAITING * FRAME_SPEED;
            gAnimationEnd = BOWSER_RIGHT_WAITING_END;

            //Play the music
            Mix_PlayMusic( gMusic, -1 );

                        //While application is running
                        while( !quit )
                        {
                                //Handle events on queue
                                while( SDL_PollEvent( &e ) != 0 )
                                {
                                        //User requests quit
                                        if( e.type == SDL_QUIT )
                                        {
                                                quit = true;
                                        }
                                        else if( e.type == SDL_KEYDOWN )
                    {
                        switch( e.key.keysym.sym )
                        {
                            case SDLK_RIGHT:
                            gDirection = BOWSER_RIGHT;
                            gLastID = BOWSER_RIGHT_WALK;
                            gFrame = BOWSER_RIGHT_WALK * FRAME_SPEED;
                            gAnimationEnd = BOWSER_RIGHT_WALK_END;
                            break;

                            case SDLK_LEFT:
                            gDirection = BOWSER_LEFT;
                            gLastID = BOWSER_LEFT_WALK;
                            gFrame = BOWSER_LEFT_WALK * FRAME_SPEED;
                            gAnimationEnd = BOWSER_LEFT_WALK_END;
                            break;
                        }
                    }
                    else if( e.type == SDL_KEYUP )
                    {
                        switch( e.key.keysym.sym )
                        {
                            case SDLK_RIGHT:
                            gDirection = BOWSER_RIGHT;
                            gLastID = BOWSER_RIGHT_WAITING;
                            gFrame = BOWSER_RIGHT_WAITING * FRAME_SPEED;
                            gAnimationEnd = BOWSER_RIGHT_WAITING_END;
                            break;

                            case SDLK_LEFT:
                            gDirection = BOWSER_LEFT;
                            gLastID = BOWSER_LEFT_WAITING;
                            gFrame = BOWSER_LEFT_WAITING * FRAME_SPEED;
                            gAnimationEnd = BOWSER_LEFT_WAITING_END;
                            break;
                        }
                    }
                                }

                                //Set clip frame animation on current keystate
                                /*const Uint8* currentKeyStates = SDL_GetKeyboardState( NULL );
                                if( currentKeyStates[ SDL_SCANCODE_RIGHT ] )
                {
                    gDirection = BOWSER_RIGHT;
                    gLastID = BOWSER_RIGHT_WALK;
                    gFrame = BOWSER_RIGHT_WALK * FRAME_SPEED;
                    gAnimationEnd = BOWSER_RIGHT_WALK_END;
                }
                else if( currentKeyStates[ SDL_SCANCODE_LEFT ] )
                {
                    gDirection = BOWSER_LEFT;
                    gLastID = BOWSER_LEFT_WALK;
                    gFrame = BOWSER_LEFT_WALK * FRAME_SPEED;
                    gAnimationEnd = BOWSER_LEFT_WALK_END;
                }
                else
                {
                    if( gDirection == BOWSER_RIGHT )
                    {
                        gLastID = BOWSER_RIGHT_WAITING;
                        gFrame = BOWSER_RIGHT_WAITING * FRAME_SPEED;
                        gAnimationEnd = BOWSER_RIGHT_WAITING_END;
                    }
                    else if( gDirection == BOWSER_LEFT )
                    {
                        gLastID = BOWSER_LEFT_WAITING;
                        gFrame = BOWSER_LEFT_WAITING * FRAME_SPEED;
                        gAnimationEnd = BOWSER_LEFT_WAITING_END;
                    }
                }*/

                                //Clear screen
                                SDL_SetRenderDrawColor( gRenderer, 0xFF, 0xFF, 0xFF, 0xFF );
                                SDL_RenderClear( gRenderer );

                                //Render background texture to screen
                                gBackgroundParallaxTexture.render( 0, 0 );
                                gBackgroundTexture.render( 0, 0 );

                                //Render text on screen
                                gTextTexture.render( ( SCREEN_WIDTH - gTextTexture.getWidth() )
                                     / 2, ( SCREEN_HEIGHT -
                                     gTextTexture.getHeight() ) / 12 );

                                //Render current animation frame
                                SDL_Rect* currentClip = &gSpriteBowser[ gFrame / FRAME_SPEED ];
                                gBowserTexture.render(
                               ( SCREEN_WIDTH - currentClip->w ) / 2,
                               ( SCREEN_HEIGHT - currentClip->h ),
                               currentClip );

                //Update screen
                                SDL_RenderPresent( gRenderer );

                                //Go to next frame
                                ++gFrame;

                                //Cycle animation
                                if( gFrame / FRAME_SPEED >= gAnimationEnd )
                                {
                                        gFrame = gLastID * FRAME_SPEED;
                                }
                        }
                }
        }

        //Free resources and close SDL
        close();

        fprintf( stdout, "__Succeeded main()\n" );
        return EXIT_SUCCESS;
}





/* Animate the sprite depending the given stateID

void        animBowser( int stateID )
{
    switch( stateID )
    {
        case BOWSER_RIGHT_WAITING:
        for ( int frame = BOWSER_RIGHT_WAITING; frame <=
                                        BOWSER_RIGHT_WAITING_END; ++frame )
        {
            gBowserTexture.render( 0,
                               SCREEN_HEIGHT - gSpriteBowser[ frame ].h - 20,
                               &gSpriteBowser[ frame ] );
            SDL_Delay(500);
            if ( frame == BOWSER_RIGHT_WAITING_END )
            {
                frame = BOWSER_RIGHT_WAITING;
            }
        }
        break;

        default:
        gBowserTexture.render( 0,
                SCREEN_HEIGHT - gSpriteBowser[ BOWSER_RIGHT_WAITING ].h - 20,
                &gSpriteBowser[ BOWSER_RIGHT_WAITING ] );
        break;
    }
}


/* Set clipping */

void set_clips()
{
    //Set clipping for Bowser animation
    int i = 1;
    while( i < 90 )
    {
        for( int iy = 0; iy < BOWSER_ANIMATION_TILES_Y; ++iy )
        {
            for( int ix = 0; ix < BOWSER_ANIMATION_TILES_X; ++ix )
            {
                gSpriteBowser[ i ].x = BOWSER_SIZE_W * ix;
                gSpriteBowser[ i ].y = BOWSER_SIZE_H * iy;
                gSpriteBowser[ i ].w = BOWSER_SIZE_W;
                gSpriteBowser[ i ].h = BOWSER_SIZE_H;
                ++i;
            }
        }
    }
}



#define BOWSER_RIGHT                    -1
#define BOWSER_LEFT                     -2

#define BOWSER_RIGHT_WALK               1
#define BOWSER_RIGHT_WALK_END           16

#define BOWSER_LEFT_WALK                17*1+1
#define BOWSER_LEFT_WALK_END            17*1+16

#define BOWSER_RIGHT_ATTACK             17*2+1
#define BOWSER_RIGHT_ATTACK_END         17*2+17

#define BOWSER_LEFT_ATTACK              17*3+1
#define BOWSER_LEFT_ATTACK_END          17*3+17

#define BOWSER_RIGHT_WAITING            17*4+1
#define BOWSER_RIGHT_WAITING_END        17*4+7

#define BOWSER_LEFT_WAITING             17*5+1
#define BOWSER_LEFT_WAITING_END         17*5+7